
# タイムトラベル仕入れ・オークションゲーム仕様書（シンプルロジック版）

## 概要

このゲームは、プレイヤーが限られた元金を使って過去にタイムトラベルし、物品を仕入れて現代のメルカリ風オークションで売却し、利益を得ることを目的とする。  
この仕様は、フレーバー（文脈や演出）を排除し、純粋なロジックの構築にフォーカスするものである。
まずはゲーム性とそのサイクルの実証までを目指す。

///
コーディングのルールとして、１ファイル約400行程度にして。それ以上は分割を。

UIは将来リッチな方法で実装したいが、当面はflaskでwebブラウザで実装する。
以下をpython処理のエントリとして、実行できるbatを生成する。ローカルサーバーをpythonで起動してhtmlを開かせて。
C:\work\script\timetravel\entry.py

ただし以下の仮想環境を使用し、必要なものは確認を行ってinstallする。
C:\work\script\timetravel\venv
上記をgitignoreに追記して。

installが必要なものはいかに追記する。
requirements.txt

さらに仕様は以下を更新して。
README.md

また、仕様が変わったり、実装経緯に関してはこの文書を更新して。

&&などwindows環境で使用できないコマンドを使わないように。
---

## 1. ゲーム初期状態

- プレイヤーの元金：1000円
- プレイヤーは「買う」または「売る」モードを選択できる
- お金が0円以下になるとゲームオーバー

---

## 2. 「買う」モード

### 入力パラメータ（プレイヤーが指定）

- **年数差（int）**：現代から何年前に行くか。1年 = 1円
- **距離（int）**：東京を中心とした移動距離（km）。1km = 1円
- **UFOサイズ倍率（float）**：1.0～100.0倍。総コストに乗算される

### 費用計算

```
総費用 = (年数差 + 距離) × UFOサイズ倍率
```

### 仕入れ処理

- UFOのサイズに応じて、複数個の物品を取得
- 各物品は以下の情報を持つ：

| 属性 | 内容 |
|------|------|
| ジャンル | カテゴリ（例：家電、玩具、服飾など） |
ジャンルは約10個、先に適当に作ってハードコードしておいて使って。

| 状態 | ランダム or 年代に応じて（A:新品、B:良品、C:劣化） |
| 希少性 | コモン、レア、ウルトラレアなど（ランダム／年代依存） |

※それぞれが数値を持っていて乗算値が潜在的な価格になる。

---

## 3. 「売る」モード

### プレイヤーの操作

- 所有物品の中から出品物を選択
- 出品できる最大数は８個まで。
- 販売価格（開始価格）を設定
- オークションを1分間シミュレート

### プレイヤーの操作　UIと詳細
- とりあえず、テーブルのようなUIで表現して。機能的な演出のないもので良い。
- A 出品物、B 開始価格、C 入札数、D 現在価格。の四つの表示。また出品のボタンで1分間のオークション開始。
- A 出品物、B 開始価格、この二つが操作できる。出品物は在庫からの選択と、取り消しで空にもできる。
- 取り消ししたものは在庫に戻る。オークション中は開始価格を変えられないが、再出品すれば再設定できる。
- 1分間は再出品してもリセットされない。開始を押すと、全体に対して1分間オークションの処理がされるのみ。


### 販売ロジック

- AIの入札者が複数存在
- 各AIは以下の評価関数により、商品に対する興味度を決定

```
興味度 = f(ジャンル, 希少性, 状態, 値付け)
```

- 興味度が閾値を超える場合、入札で購入される
- 入札時に適当に高値をつけ、1分間のタイムアップまで更新され続ける。
- 価格が高すぎる場合は無視される
- 販売成功時：
    - 手数料（例：10%）を引いて売却益を得る
- 販売失敗時：
    - 商品はそのまま出品状態で残る（価格を変えたり、再出品可）
---

## 4. オークションAIのシンプルモデル（初期段階）

- AIの属性：好みのジャンル、の中で　状態と希少性への関心度
- 行動：商品が許容価格内なら入札、即決条件に一致すれば即購入

※オークションAIはそれぞれ複数のジャンルをListとして持つ。商品のジャンルが一致すると興味を持つ。
---

## 5. 今後の拡張想定（まだ行わない）

- LLMを導入して、フレーバーをいれたい
- 商品名・説明文をLLMで生成（ユニークな個体化）
- 買い手AIの興味・行動をプロンプトベースで構築
- オークション時のコメント・評価なども自然文で生成

---

## 6. フェーズ分割実装指針（開発者向け）

0. **フェーズ0**：仮のUIをpythonとflaskで作り、実行させるbatを作って起動確認
1. **フェーズ1**：買うモードのコスト計算と商品生成ロジック
2. **フェーズ2**：売るモードの価格評価とオークション結果判定
3. **フェーズ3**：収益・資金管理とループ処理
4. **フェーズ4**：商品保持・再出品ロジック

まずここまでをめざそう

5. **フェーズ5**：LLM導入準備のための商品構造設計とコメント処理フック
6. **フェーズ6**：pyxelなどを利用してインターフェースをよくする。
---
