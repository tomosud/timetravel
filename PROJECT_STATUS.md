# プロジェクト開発状況

**最終更新**: 2025-06-21  
**現在のフェーズ**: ゲームサイクル・価格システム（バグ修正段階）

## 現在の開発状況

### ✅ 完了済みフェーズ
- **フェーズ0-4**: 基本ゲームループ実装済み
  - Flask Webアプリケーション基盤
  - 買うモード・売るモードの基本機能
  - AIオークションシステム
  - 商品管理・在庫システム
  - ゲーム状態管理

- **リファクタリング**: ゲームロジックとUI分離完了
  - core/api/web層の3層アーキテクチャ実装
  - JSON API設計で将来のUI変更に対応

- **ゲームサイクル強化**: 長期成長システム実装
  - 大ターン・子ターンシステム (8子ターン/大ターン)
  - 価格倍率曲線生成 (10倍成長保証)
  - ターン進行機能とデバッグページ

### 🔄 進行中
- **バグ修正**: 2つの表示系バグ対応中
  1. 価格曲線が商品価格に未反映
  2. 全部出品機能の価格表示不具合

### 📋 次のステップ
1. **即座対応**: 上記2バグの修正
2. **フェーズ2**: 攻略性・戦略要素の導入
3. **フェーズ5**: LLM連携による演出強化

## 技術的現状

### アーキテクチャ
```
timetravel/
├── core/           # ゲームロジック層
├── api/            # JSON API層  
├── web/            # Flask UI層
└── templates/      # HTMLテンプレート
```

### 主要システム
- **大ターン・子ターンシステム**: 8子ターン単位で価格曲線生成
- **価格倍率曲線**: ランダムノイズ+正規化で10倍成長保証
- **AIオークション**: 15人の動的バイヤー生成システム
- **商品システム**: ジャンル・状態・レア度による価値計算

## 未解決課題

### 緊急度: 高
1. **価格曲線表示バグ**: `templates/sell.html:235`でestimated_price未使用
2. **全部出品価格バグ**: data-estimated-price属性が未設定

### 緊急度: 中
- フェーズ2設計: プレイヤーの戦略的選択要素の導入
- UI/UX改善: デバッグページの本格UI化

### 緊急度: 低
- パフォーマンス最適化
- データ永続化（現在はメモリ上のみ）

## 開発環境

### 対応環境
- **WSL/Linux**: `venv`仮想環境
- **Windows**: `venv_win`仮想環境  
- **実行**: `run.bat`でFlaskサーバー起動

### 重要ファイル
- `core/turn_system.py`: ターンシステム管理
- `core/item_system.py`: 商品・価格計算
- `templates/sell.html`: 売却UI（バグ修正対象）
- `/debug`: デバッグページ（資産推移グラフ等）

## ゲーム仕様概要

### 基本ループ
1. **購買**: タイムトラベルで商品取得（子ターン進行）
2. **売却**: AIオークションで売却益獲得
3. **成長**: 価格倍率曲線により長期的に10倍成長

### 現在のバランス
- 初期資金: 1000円
- 大ターン終了時: 投資1→価値10の成長保証
- 子ターン数: 8ターン/大ターン

---

**次回開始時の作業**: 上記2バグ修正→フェーズ2設計開始