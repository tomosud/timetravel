# タイムトラベル仕入れ・オークションゲーム

## 概要

このゲームは、プレイヤーが限られた元金を使って過去にタイムトラベルし、物品を仕入れて現代のメルカリ風オークションで売却し、利益を得ることを目的とするWebゲームです。

## 実装フェーズ

現在の実装状況：**フェーズ0～4完了**

- ✅ **フェーズ0**: 基盤構築（Flask、HTML/CSS/JavaScript、バッチファイル）
- ✅ **フェーズ1**: 買うモードのコスト計算と商品生成ロジック
- ✅ **フェーズ2**: 売るモードの価格評価とオークション結果判定
- ✅ **フェーズ3**: 収益・資金管理とループ処理
- ✅ **フェーズ4**: 商品保持・再出品ロジック

## 動作環境

- Python 3.7以上
- Windows環境（batファイル使用）

## セットアップ・実行方法

### 1. 簡単実行（推奨）

```cmd
run.bat
```

この単一コマンドで以下が自動実行されます：
- 仮想環境の作成（初回のみ）
- 必要パッケージのインストール
- ゲームサーバーの起動

### 2. 手動セットアップ

```cmd
# 仮想環境作成
python -m venv venv

# 仮想環境アクティベート
venv\Scripts\activate.bat

# 依存関係インストール
pip install -r requirements.txt

# ゲーム実行
python entry.py
```

## 使用方法

1. `run.bat` を実行
2. ブラウザで `http://127.0.0.1:5000` にアクセス
3. ゲーム開始！

### ゲームの流れ

1. **初期状況**: 所持金1000円でスタート
2. **買うモード**: タイムトラベルして商品を仕入れ
   - 年数差、距離、UFOサイズを設定
   - コスト = (年数差 + 距離) × UFOサイズ
   - 古い年代ほど希少性の高い商品が見つかりやすい
3. **売るモード**: オークションで商品を売却
   - 最大8個まで同時出品可能
   - 1分間のオークションシミュレート
   - AIバイヤーが自動入札
   - 手数料10%を差し引いて利益計算

### ゲームオーバー条件

- 所持金が0円以下になるとゲームオーバー
- リセットボタンで初期状態に戻せます

## 技術仕様

### アーキテクチャ

- **バックエンド**: Flask (Python)
- **フロントエンド**: HTML/CSS/JavaScript
- **データ**: メモリ上のゲーム状態管理

### 商品システム

#### ジャンル（10種類）
家電、玩具、服飾、書籍、美術品、楽器、スポーツ用品、工具、食器、アクセサリー

#### 状態
- A（新品）: 倍率 1.0
- B（良品）: 倍率 0.8  
- C（劣化）: 倍率 0.6

#### 希少性
- コモン: 倍率 1.0（確率 70%）
- レア: 倍率 2.0（確率 25%）
- ウルトラレア: 倍率 5.0（確率 5%）

### AIオークションシステム

- 10体のAIバイヤーが存在
- 各AIは2-4個のジャンルに興味を持つ
- 興味度 = ジャンル適合 × 状態評価 × 希少性評価 × 価格評価
- 興味度が閾値（0.8）を超えると入札

## ファイル構成

```
timetravel/
├── entry.py              # エントリーポイント
├── app.py                # Flaskアプリケーション
├── requirements.txt      # 依存パッケージ
├── run.bat              # 実行用バッチファイル
├── README.md            # このファイル
├── templates/           # HTMLテンプレート
│   ├── index.html       # メインページ
│   ├── buy.html         # 買うモード
│   └── sell.html        # 売るモード
└── venv/                # 仮想環境（自動作成）
```

## 今後の拡張予定

- **フェーズ5**: LLM導入準備（商品名・説明文の自動生成）
- **フェーズ6**: UIの改善（pyxelなどによるリッチなインターフェース）

## 開発ガイドライン

- 1ファイル約400行以内で機能分割
- Windows環境対応（`&&` 等の使用禁止）
- 仮想環境による依存関係管理

## バージョン情報

- v1.0.0: 基本ゲームループ実装完了

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。
