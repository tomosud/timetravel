# タイムトラベル仕入れ・オークションゲーム

## 概要

このゲームは、プレイヤーが限られた元金を使って過去にタイムトラベルし、物品を仕入れて現代のメルカリ風オークションで売却し、利益を得ることを目的とするWebゲームです。

## 実装フェーズ

**開発計画**: [developmentPlan.md](./developmentPlan.md)を参照

## 動作環境

- Python 3.7以上
- Windows環境（batファイル使用、venv_win仮想環境）
- WSL/Linux環境（venv仮想環境）

## セットアップ・実行方法

### 1. 簡単実行（推奨）

```cmd
run.bat
```

この単一コマンドで以下が自動実行されます：
- 仮想環境の作成（初回のみ）
- 必要パッケージのインストール
- ゲームサーバーの起動

### 2. 手動セットアップ

**Windows環境:**
```cmd
# 仮想環境作成
python -m venv venv_win

# 仮想環境アクティベート
venv_win\Scripts\activate.bat

# 依存関係インストール
pip install -r ./requirements.txt

# ゲーム実行
python ./entry.py
```

**WSL/Linux環境:**
```bash
# 仮想環境作成
python3 -m venv venv

# 仮想環境アクティベート
source venv/bin/activate

# 依存関係インストール
pip install -r ./requirements.txt

# ゲーム実行
python ./entry.py
```

## 使用方法

1. `./run.bat` を実行
2. ブラウザで `http://127.0.0.1:5000` にアクセス
3. ゲーム開始！

### ゲームの流れ

1. **初期状況**: 所持金1000円でスタート
2. **買うモード**: タイムトラベルして商品を仕入れ
   - 年数差、距離、UFOサイズを設定
   - コスト = (年数差 × 距離) × UFOサイズ
   - **新仕様**: 取得アイテム数2～5個、期待価値≒投資額±10%
3. **売るモード**: オークションで商品を売却
   - 最大8個まで同時出品可能
   - 1分間のオークションシミュレート
   - AIバイヤーが自動入札
   - 手数料10%を差し引いて利益計算

### ゲームオーバー条件

- **所持金が0円 かつ 在庫なし** でゲームオーバー
- 在庫なしで1000円持っていても、1000円投資すれば商品が手に入り継続可能
- **買い物失敗システム**: 10%の確率でタイムトラベルが失敗し、お金を失うが商品は得られない
- リセットボタンで初期状態に戻せます


## 技術仕様

### アーキテクチャ

- **バックエンド**: Flask (Python)
- **フロントエンド**: HTML/CSS/JavaScript
- **データ**: メモリ上のゲーム状態管理

### 商品システム

#### ジャンル（10種類）
家電、玩具、服飾、書籍、美術品、楽器、スポーツ用品、工具、食器、アクセサリー

#### 状態
- A（新品）: 倍率 1.0
- B（良品）: 倍率 0.8  
- C（劣化）: 倍率 0.6

#### 希少性（動的レア度システム）
- **距離と年数に応じた動的計算**: 遠く、昔に行くほどレア度が向上
- **レア度階層**:
  - コモン: 倍率 1.0～1.4
  - レア: 倍率 1.5～2.4
  - ウルトラレア: 倍率 2.5～3.9
  - 伝説: 倍率 4.0～5.4
  - 神話: 倍率 5.5以上
- **計算式**: 基本倍率 + 年数ボーナス + 距離ボーナス + 組み合わせボーナス

### AIオークションシステム

- 10体のAIバイヤーが存在
- 各AIは2-4個のジャンルに興味を持つ
- 興味度 = ジャンル適合 × 状態評価 × 希少性評価 × 価格評価
- 興味度が閾値（0.8）を超えると入札

## ファイル構成

```
timetravel/
├── entry.py              # エントリーポイント
├── app.py                # Flaskアプリケーション
├── requirements.txt      # 依存パッケージ
├── run.bat              # 実行用バッチファイル
├── README.md            # このファイル（成果物仕様）
├── developmentPlan.md   # 開発計画・進行管理
├── templates/           # HTMLテンプレート
│   ├── index.html       # メインページ
│   ├── buy.html         # 買うモード
│   └── sell.html        # 売るモード
├── venv/                # 仮想環境（WSL/Linux）
└── venv_win/            # 仮想環境（Windows）
```

## 開発ガイドライン

**開発の詳細な方針・規約**: [developmentPlan.md](./developmentPlan.md)を参照

### 基本方針
- ゲームロジックとUIの完全分離
- 最小限のインターフェースでゲームサイクル確立
- 機能の小分け・段階的実装

## バージョン情報

- v1.0.0: 基本ゲームループ実装完了

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。
